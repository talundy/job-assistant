<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume-Job Matcher - Test</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Resume-Job Matcher - Test Mode</h1>
            <p>This is a test page to verify the frontend works correctly</p>
        </header>

        <main>
            <div class="upload-section">
                <div class="upload-card">
                    <h3>Resume</h3>
                    <div class="file-upload-area" id="resumeUpload">
                        <div class="upload-content">
                            <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7,10 12,15 17,10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            <p>Click to upload resume (TXT files only for testing)</p>
                            <input type="file" id="resumeFile" accept=".txt" style="display: none;">
                        </div>
                    </div>
                    <div id="resumePreview" class="file-preview" style="display: none;">
                        <p id="resumeName"></p>
                        <button onclick="removeFile('resume')" class="remove-btn">Remove</button>
                    </div>
                </div>

                <div class="upload-card">
                    <h3>Job Description</h3>
                    <div class="file-upload-area" id="jobUpload">
                        <div class="upload-content">
                            <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7,10 12,15 17,10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            <p>Click to upload job description (TXT files only for testing)</p>
                            <input type="file" id="jobFile" accept=".txt" style="display: none;">
                        </div>
                    </div>
                    <div id="jobPreview" class="file-preview" style="display: none;">
                        <p id="jobName"></p>
                        <button onclick="removeFile('job')" class="remove-btn">Remove</button>
                    </div>
                </div>
            </div>

            <div class="action-section">
                <button id="analyzeBtn" class="analyze-btn" disabled>Test Analysis (Mock Data)</button>
            </div>

            <div id="loadingSection" class="loading-section" style="display: none;">
                <div class="spinner"></div>
                <p>Analyzing your resume and job description...</p>
            </div>

            <div id="resultsSection" class="results-section" style="display: none;">
                <h2>Test Analysis Results</h2>
                <div class="score-section">
                    <div class="score-circle">
                        <span id="matchScore">0</span>
                        <span class="score-label">Match Score</span>
                    </div>
                </div>
                <div class="analysis-grid">
                    <div class="analysis-card">
                        <h3>Strengths</h3>
                        <ul id="strengthsList"></ul>
                    </div>
                    <div class="analysis-card">
                        <h3>Gaps</h3>
                        <ul id="gapsList"></ul>
                    </div>
                    <div class="analysis-card">
                        <h3>Suggestions</h3>
                        <ul id="suggestionsList"></ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Simplified test version of the script
        let resumeFile = null;
        let jobFile = null;

        document.addEventListener('DOMContentLoaded', function() {
            setupFileUploads();
            setupAnalyzeButton();
        });

        function setupFileUploads() {
            const resumeUpload = document.getElementById('resumeUpload');
            const resumeFileInput = document.getElementById('resumeFile');
            
            resumeUpload.addEventListener('click', () => resumeFileInput.click());
            resumeFileInput.addEventListener('change', (e) => handleFileSelect(e, 'resume'));
            
            const jobUpload = document.getElementById('jobUpload');
            const jobFileInput = document.getElementById('jobFile');
            
            jobUpload.addEventListener('click', () => jobFileInput.click());
            jobFileInput.addEventListener('change', (e) => handleFileSelect(e, 'job'));
        }

        function handleFileSelect(event, type) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (type === 'resume') {
                resumeFile = file;
                showFilePreview(file, 'resume');
            } else {
                jobFile = file;
                showFilePreview(file, 'job');
            }
            
            updateAnalyzeButton();
        }

        function showFilePreview(file, type) {
            const uploadArea = document.getElementById(`${type}Upload`);
            const preview = document.getElementById(`${type}Preview`);
            const nameElement = document.getElementById(`${type}Name`);
            
            uploadArea.style.display = 'none';
            preview.style.display = 'flex';
            nameElement.textContent = file.name;
        }

        function removeFile(type) {
            const uploadArea = document.getElementById(`${type}Upload`);
            const preview = document.getElementById(`${type}Preview`);
            const fileInput = document.getElementById(`${type}File`);
            
            if (type === 'resume') {
                resumeFile = null;
            } else {
                jobFile = null;
            }
            
            uploadArea.style.display = 'block';
            preview.style.display = 'none';
            fileInput.value = '';
            
            updateAnalyzeButton();
        }

        function updateAnalyzeButton() {
            const analyzeBtn = document.getElementById('analyzeBtn');
            analyzeBtn.disabled = !(resumeFile && jobFile);
        }

        function setupAnalyzeButton() {
            const analyzeBtn = document.getElementById('analyzeBtn');
            analyzeBtn.addEventListener('click', testAnalysis);
        }

        function testAnalysis() {
            showLoading(true);
            hideResults();
            
            // Simulate API delay
            setTimeout(() => {
                const mockResult = {
                    analysis: `Score: 69

Strengths:
- Strong technical background in Python and machine learning
- Relevant experience with data analysis projects
- Good communication skills demonstrated in previous roles

Gaps:
- Limited experience with cloud platforms (AWS/Azure)
- No direct experience with the specific industry
- Missing certification in relevant technologies

Suggestions:
- Add bullet point about cloud computing experience
- Include specific metrics from previous projects
- Highlight transferable skills from other industries`
                };
                
                displayResults(mockResult);
                showLoading(false);
            }, 2000);
        }

        function displayResults(result) {
            const score = extractScore(result.analysis);
            document.getElementById('matchScore').textContent = score;
            
            const sections = parseAnalysis(result.analysis);
            
            const strengthsList = document.getElementById('strengthsList');
            strengthsList.innerHTML = '';
            sections.strengths.forEach(strength => {
                const li = document.createElement('li');
                li.textContent = strength;
                strengthsList.appendChild(li);
            });
            
            const gapsList = document.getElementById('gapsList');
            gapsList.innerHTML = '';
            sections.gaps.forEach(gap => {
                const li = document.createElement('li');
                li.textContent = gap;
                gapsList.appendChild(li);
            });
            
            const suggestionsList = document.getElementById('suggestionsList');
            suggestionsList.innerHTML = '';
            sections.suggestions.forEach(suggestion => {
                const li = document.createElement('li');
                li.textContent = suggestion;
                suggestionsList.appendChild(li);
            });
            
            showResults();
        }

        function extractScore(analysis) {
            const scoreMatch = analysis.match(/(\d+)/);
            return scoreMatch ? scoreMatch[1] : '75';
        }

        function parseAnalysis(analysis) {
            const lines = analysis.split('\n');
            const sections = {
                strengths: [],
                gaps: [],
                suggestions: []
            };
            
            let currentSection = null;
            
            for (const line of lines) {
                const trimmedLine = line.trim();
                if (!trimmedLine) continue;
                
                if (trimmedLine.toLowerCase().includes('strength')) {
                    currentSection = 'strengths';
                } else if (trimmedLine.toLowerCase().includes('gap') || trimmedLine.toLowerCase().includes('missing')) {
                    currentSection = 'gaps';
                } else if (trimmedLine.toLowerCase().includes('suggest') || trimmedLine.toLowerCase().includes('bullet')) {
                    currentSection = 'suggestions';
                } else if (currentSection && (trimmedLine.startsWith('-') || trimmedLine.startsWith('•'))) {
                    sections[currentSection].push(trimmedLine.substring(1).trim());
                }
            }
            
            return sections;
        }

        function showLoading(show) {
            const loadingSection = document.getElementById('loadingSection');
            loadingSection.style.display = show ? 'block' : 'none';
        }

        function showResults() {
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.style.display = 'block';
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        function hideResults() {
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.style.display = 'none';
        }
    </script>
</body>
</html> 